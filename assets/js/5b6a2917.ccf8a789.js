"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8442],{3900(e,n,t){t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"mcp-apps","title":"MCP Apps","description":"MCP Apps enable MCP servers to deliver interactive user interfaces directly in your chat interface. This standardized pattern allows servers to present visual information and gather complex user input beyond text and structured data.","source":"@site/docs/mcp-apps.md","sourceDirName":".","slug":"/mcp-apps","permalink":"/mcp-ts/docs/mcp-apps","draft":false,"unlisted":false,"editUrl":"https://github.com/zonlabs/mcp-ts/tree/main/docs/docs/mcp-apps.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Adapters","permalink":"/mcp-ts/docs/adapters"},"next":{"title":"API Reference","permalink":"/mcp-ts/docs/api-reference"}}');var s=t(4848),a=t(8453);const i={sidebar_position:5},o="MCP Apps",p={},l=[{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"1. Setup MCP Connection",id:"1-setup-mcp-connection",level:3},{value:"2. Render MCP Apps in Tool Calls",id:"2-render-mcp-apps-in-tool-calls",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"Complete Flow",id:"complete-flow",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"useMcpApps",id:"usemcpapps",level:3},{value:"getAppMetadata",id:"getappmetadata",level:3},{value:"McpAppRenderer Props",id:"mcpapprenderer-props",level:3},{value:"Framework Integration",id:"framework-integration",level:2},{value:"CopilotKit",id:"copilotkit",level:3},{value:"Custom Frameworks",id:"custom-frameworks",level:3},{value:"Server-Side Setup",id:"server-side-setup",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"App not rendering",id:"app-not-rendering",level:3},{value:"Tool input not received",id:"tool-input-not-received",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"mcp-apps",children:"MCP Apps"})}),"\n",(0,s.jsx)(n.p,{children:"MCP Apps enable MCP servers to deliver interactive user interfaces directly in your chat interface. This standardized pattern allows servers to present visual information and gather complex user input beyond text and structured data."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["When an MCP server exposes a tool with UI metadata (",(0,s.jsx)(n.code,{children:"_meta.ui.resourceUri"}),"), ",(0,s.jsx)(n.code,{children:"@mcp-ts/sdk"})," automatically renders the tool's interface in a sandboxed iframe. The app communicates with the host page through the ",(0,s.jsx)(n.strong,{children:"AppBridge"})," protocol, enabling bidirectional communication for tool execution and messaging."]}),"\n",(0,s.jsx)(n.mermaid,{value:'graph TB\n    subgraph Browser["Browser"]\n        subgraph ReactApp["React App (Host)"]\n            useMcp["useMcp Hook"]\n            SSEClient["SSEClient"]\n            ToolRenderer["ToolRenderer"]\n            useMcpApps["useMcpApps Hook"]\n\n            subgraph Iframe["Sandboxed Iframe"]\n                McpAppUI["MCP App UI"]\n            end\n        end\n    end\n\n    subgraph Server["MCP Server"]\n        Tools["Tools with UI"]\n        Resources["UI Resources"]\n    end\n\n    useMcp --\x3e SSEClient\n    SSEClient --\x3e|"HTTP/SSE"| Server\n    ToolRenderer --\x3e useMcpApps\n    useMcpApps --\x3e|"AppBridge<br/>(PostMessage)"| McpAppUI\n    McpAppUI --\x3e|"Tool Calls"| SSEClient'}),"\n",(0,s.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Secure Sandboxing"})," - Apps run in iframes with minimal permissions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resource Preloading"})," - UI resources are cached at tool discovery for instant loading"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bidirectional Communication"})," - Apps can call server tools and receive results"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Theme Support"})," - Host context (theme, platform) passed to apps"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(n.h3,{id:"1-setup-mcp-connection",children:"1. Setup MCP Connection"}),"\n",(0,s.jsx)(n.p,{children:"First, establish an MCP connection in your app:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { useMcp } from "@mcp-ts/sdk/client/react";\n\nfunction App() {\n  const { mcpClient, connections, connect } = useMcp({\n    url: "/api/mcp",\n    identity: "user-123",\n  });\n\n  // Connect on mount\n  useEffect(() => {\n    connect("my-mcp-server");\n  }, [connect]);\n\n  return (\n    <McpProvider mcpClient={mcpClient}>\n      <ChatInterface />\n    </McpProvider>\n  );\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"2-render-mcp-apps-in-tool-calls",children:"2. Render MCP Apps in Tool Calls"}),"\n",(0,s.jsxs)(n.p,{children:["Use the simplified ",(0,s.jsx)(n.code,{children:"useMcpApps"})," hook to render MCP apps when tools are called:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { useRenderToolCall } from "@copilotkit/react-core";\nimport { useMcpApps } from "@mcp-ts/sdk/client/react";\n\nfunction ToolRenderer() {\n  const { mcpClient } = useMcpContext();\n  const { getAppMetadata, McpAppRenderer } = useMcpApps(mcpClient);\n\n  useRenderToolCall({\n    name: "*",\n    render: ({ name, args, result, status }) => {\n      // Get metadata for this tool\n      const metadata = getAppMetadata(name);\n      \n      if (!metadata) {\n        return null; // Not an MCP app tool\n      }\n\n      // Render the MCP app with tool call data\n      return (\n        <McpAppRenderer\n          metadata={metadata}\n          input={args}\n          result={result}\n          status={status}\n        />\n      );\n    },\n  });\n\n  return null;\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["That's it! The ",(0,s.jsx)(n.code,{children:"McpAppRenderer"})," component handles:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Iframe creation and sandboxing"}),"\n",(0,s.jsx)(n.li,{children:"AppBridge protocol communication"}),"\n",(0,s.jsx)(n.li,{children:"Tool input/result delivery to the app"}),"\n",(0,s.jsx)(n.li,{children:"Loading states"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,s.jsx)(n.h3,{id:"complete-flow",children:"Complete Flow"}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant User as User\n    participant Chat as Chat Interface\n    participant CopilotKit as CopilotKit\n    participant ToolRenderer as ToolRenderer\n    participant useMcpApps as useMcpApps\n    participant SSE as SSEClient\n    participant Server as MCP Server\n    participant Iframe as Sandboxed Iframe\n    participant App as MCP App\n\n    rect rgb(230, 240, 255)\n    Note over User,Server: Phase 1: Connection & Discovery\n    User->>Chat: Send message\n    Chat->>SSE: Connect to MCP server\n    SSE->>Server: List tools\n    Server--\x3e>SSE: Tools with UI metadata\n    SSE->>SSE: Preload UI resources\n    Note right of SSE: Resources cached<br/>for instant loading\n    end\n\n    rect rgb(255, 240, 230)\n    Note over User,ToolRenderer: Phase 2: Tool Execution\n    CopilotKit->>CopilotKit: LLM calls tool\n    CopilotKit->>ToolRenderer: Render tool call\n    ToolRenderer->>useMcpApps: getAppMetadata(toolName)\n    useMcpApps--\x3e>ToolRenderer: Metadata (uri, sessionId)\n    end\n\n    rect rgb(240, 255, 240)\n    Note over ToolRenderer,App: Phase 3: App Rendering\n    ToolRenderer->>Iframe: Create sandboxed iframe\n    Iframe->>App: Load MCP App UI\n    App->>App: Initialize AppBridge\n    App--\x3e>Iframe: Ready\n    Iframe--\x3e>useMcpApps: App ready\n    end\n\n    rect rgb(255, 245, 230)\n    Note over User,App: Phase 4: Data Flow\n    useMcpApps->>App: Send tool input (args)\n    Server--\x3e>CopilotKit: Tool result\n    useMcpApps->>App: Send tool result\n    App->>App: Render with data\n    end"}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(n.h3,{id:"usemcpapps",children:"useMcpApps"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function useMcpApps(mcpClient: McpClient | null): {\n  getAppMetadata: (toolName: string) => McpAppMetadata | undefined;\n  McpAppRenderer: React.FC<McpAppRendererProps>;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"mcpClient"})," - The MCP client from ",(0,s.jsx)(n.code,{children:"useMcp()"})," or context"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getAppMetadata"})," - Function to look up app metadata by tool name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"McpAppRenderer"})," - Stable component for rendering MCP apps"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"getappmetadata",children:"getAppMetadata"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function getAppMetadata(toolName: string): McpAppMetadata | undefined\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Looks up MCP app metadata for a given tool name. Handles tool name prefixes automatically (e.g., ",(0,s.jsx)(n.code,{children:"tool_abc123_get-time"})," \u2192 ",(0,s.jsx)(n.code,{children:"get-time"}),")."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"toolName"})," - The base tool name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"resourceUri"})," - The MCP resource URI for the app UI"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sessionId"})," - The session ID for the MCP connection"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"mcpapprenderer-props",children:"McpAppRenderer Props"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface McpAppRendererProps {\n  metadata: McpAppMetadata;           // Stable metadata from getAppMetadata\n  input?: Record<string, unknown>;     // Tool arguments\n  result?: unknown;                    // Tool execution result\n  status: 'executing' | 'inProgress' | 'complete' | 'idle';\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"McpAppRenderer"})," component internally manages:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Iframe lifecycle"}),"\n",(0,s.jsx)(n.li,{children:"AppBridge protocol communication"}),"\n",(0,s.jsx)(n.li,{children:"Tool input/result delivery"}),"\n",(0,s.jsx)(n.li,{children:"Loading and error states"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"framework-integration",children:"Framework Integration"}),"\n",(0,s.jsx)(n.h3,{id:"copilotkit",children:"CopilotKit"}),"\n",(0,s.jsxs)(n.p,{children:["Works seamlessly with CopilotKit's ",(0,s.jsx)(n.code,{children:"useRenderToolCall"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { useRenderToolCall } from "@copilotkit/react-core";\nimport { useMcpApps } from "@mcp-ts/sdk/client/react";\n\nfunction ToolRenderer() {\n  const { mcpClient } = useMcpContext();\n  const { getAppMetadata, McpAppRenderer } = useMcpApps(mcpClient);\n\n  useRenderToolCall({\n    name: "*",\n    render: (props) => {\n      const metadata = getAppMetadata(props.name);\n      \n      if (!metadata) {\n        // Not an MCP app tool - render default\n        return <DefaultToolCall {...props} />;\n      }\n\n      return (\n        <McpAppRenderer\n          metadata={metadata}\n          input={props.args}\n          result={props.result}\n          status={props.status}\n        />\n      );\n    },\n  });\n\n  return null;\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"custom-frameworks",children:"Custom Frameworks"}),"\n",(0,s.jsxs)(n.p,{children:["You can use ",(0,s.jsx)(n.code,{children:"useMcpApps"})," with any framework that provides tool call information:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function MyToolRenderer({ toolName, args, result, status }) {\n  const { mcpClient } = useMyMcpContext();\n  const { getAppMetadata, McpAppRenderer } = useMcpApps(mcpClient);\n  \n  const metadata = getAppMetadata(toolName);\n  \n  if (!metadata) return null;\n  \n  return (\n    <McpAppRenderer\n      metadata={metadata}\n      input={args}\n      result={result}\n      status={status}\n    />\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"server-side-setup",children:"Server-Side Setup"}),"\n",(0,s.jsx)(n.p,{children:"MCP servers declare UI apps in tool metadata:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Python example with FastMCP\nfrom mcp.server.fastmcp import FastMCP\n\nmcp = FastMCP("my-server")\n\n@mcp.tool(\n    name="get-time",\n    description="Returns the current time",\n)\nasync def get_time() -> str:\n    """Returns current time"""\n    from datetime import datetime\n    return datetime.now().isoformat()\n\n# UI metadata is added via the _meta field\nget_time._meta = {\n    "ui": {\n        "resourceUri": "ui://get-time/mcp-app.html"\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The SDK automatically discovers tools with ",(0,s.jsx)(n.code,{children:"_meta.ui.resourceUri"})," and makes them available via ",(0,s.jsx)(n.code,{children:"getAppMetadata()"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"app-not-rendering",children:"App not rendering"}),"\n",(0,s.jsx)(n.p,{children:"Check that:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["The tool has ",(0,s.jsx)(n.code,{children:"_meta.ui.resourceUri"})," set"]}),"\n",(0,s.jsx)(n.li,{children:"The resource is accessible (preloaded successfully)"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"getAppMetadata()"})," returns the metadata (tool name matches)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"tool-input-not-received",children:"Tool input not received"}),"\n",(0,s.jsx)(n.p,{children:"The app receives input when:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Iframe is loaded and AppBridge is initialized"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"input"})," prop is provided to ",(0,s.jsx)(n.code,{children:"McpAppRenderer"})]}),"\n",(0,s.jsxs)(n.li,{children:["App calls ",(0,s.jsx)(n.code,{children:"host.onToolInput()"})," to listen for input"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["See the ",(0,s.jsx)(n.a,{href:"/mcp-ts/docs/react",children:"React Guide"})," for basic MCP connection setup"]}),"\n",(0,s.jsxs)(n.li,{children:["Check the ",(0,s.jsx)(n.a,{href:"https://github.com/zonlabs/mcp-ts/tree/main/examples",children:"Examples"})," on GitHub for complete working implementations"]}),"\n",(0,s.jsxs)(n.li,{children:["Review ",(0,s.jsx)(n.a,{href:"/mcp-ts/docs/adapters",children:"Adapter Documentation"})," for LLM framework integration"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);